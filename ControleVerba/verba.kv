# -*- coding: utf-8 -*-
# Controle de Finanças
<Gerenciador>:
    Menu:
        name:'Menu'
    Adicionar:
        name: 'Adicionar'
    Visualizar:
        name: 'Visualizar'
    TelaTotal:
        name:'TelaTotal'
    Setting:
        name:'setting'

<Setting>:
    BoxLayout:
        orientation:'vertical'
        ActionBar:
            ActionView:
                ActionPrevious:
                    on_release:app.root.current = 'Menu'
        BoxLayout:
            FloatLayout:
                Spinner:
                    size_hint:None,None
                    width:'100dp'
                    height:'35dp'
                    pos_hint:{'right':.99,'center_y':.95}
                    bold:True
                    values:root.spiner
                    id:spiner_month

                Label:
                    pos_hint:{'x':.25,'center_y':.95}
                    text:'Selêcione o Mês =>'

                Label:
                    text:'Exclua o mês selêcionado'
                    pos_hint:{'center_x':.5,'center_y':.85}
                    font_size:'18'

                Button:
                    size_hint:None,None
                    width:'100dp'
                    height:'30dp'
                    pos_hint:{'center_x':.5,'center_y':.77}
                    text:"Excluir"
#                    on_release:root.excluir_mes()
                    on_release:root.popap2()

                Label:
                    pos_hint:{'x':0,'center_y':.68}
                    font_size:'20sp'
                    text:'Limpar o diretorio de arquivos '

                Button:
                    size_hint:None,None
                    width:'80dp'
                    height:'30dp'
                    pos_hint:{'center_x':.5,'center_y':.58}
                    background_color:1,0,0,1
                    text:'Limpar'
                    on_release:root.popap()


                Label:
                    pos_hint:{'center_x':.5,'center_y':.5}
                    font_size:'15sp'
                    text:'Defina a sua porcentagen a baixo'
                TextInput:
                    size_hint:None,None
                    width:'40sp'
                    height:'30sp'
                    pos_hint:{'center_x':.5,'center_y':.4}
                    id:df_porcentagen
                Label:
                    font_size:'20sp'
                    pos_hint:{'center_x':.6,'center_y':.4}
                    text:'%'
                Label:
                    pos_hint:{'x':.0,'center_y':.3}
                    text:'Apos incerir a porcentagen o programa recebe \n altomaticamente o valor!'
                    id:mensagen_setting
#
                Label:
                    text:'Fechamento do Mês!'
                    pos_hint:{'center_x':.5,'center_y':.2}
                BoxLayout:
                    size_hint_y:None
                    height:'30dp'
                    pos_hint:{'center_x':.5,'center_y':.1}
                    Label:
                        text:'Dia'
                    TextInput:
                        size_hint_x:None
                        width:'40sp'
                        id:fechamento1
                    Label:
                        text:'Até'
                    TextInput:
                        size_hint_x:None
                        width:'40sp'
                        id:fechamento2
                    Label:
<Menu>:
    BoxLayout:
        BoxLayout:
            FloatLayout:
                Label:
                    pos_hint:{'center_x':.85,'center_y':.9}
                    font_size:'30sp'
                    bold:True
                    color:0,1,1,1
                    text:'Controle Financeiro'
                    id:lb_menu
                    underline:True
                    outline_width:2
                #                outline_color:1,0,0
                #                disabled_outline_color:True

                BoxLayout:
                    size_hint_y:.15
                    pos_hint:{'center_x':.5,'center_y':.7}
                    Image:
                        allow_stretch:True
                        source:'image/telaAdd.png'
                BoxLayout:
                    size_hint_y:.12
                    pos_hint:{'center_x':.5,'center_y':.49}
                    Image:
                        allow_stretch:True
                        source:'image/minhaTela.png'
                BoxLayout:
                    size_hint_y:.15
                    pos_hint:{'center_x':.53,'center_y':.28}
                    Image:
                        allow_stretch:True
                        source:'image/dividir2.png'

            BoxLayout:
                orientation:'vertical'
                size_hint_y:.7
                padding:'10sp'
                spacing:'3dp'
                pos_hint:{'center_y':.42}
                FloatLayout:
                    Botaos:
                        size_hint_y:None
                        height:'40dp'
                        font_size:'30sp'
                        text:'Adicionar'
                        outline_width:3
                        outline_color:0,0,0
                        bold:True
                        pos_hint:{'center_x':.1,'center_y':.91}
                        on_release: app.root.current = 'Adicionar'
#                    BoxLayout:
#                        size_hint_y:None
#                        height:'25dp'
                    Botaos:
                        size_hint_y:None
                        height:'40dp'
                        font_size:sp('30')
                        bold:True
                        text:'Visualizar'
                        outline_width:3
                        outline_color:0,0,0
                        pos_hint:{'center_x':.1,'center_y':.6}
                        on_release: app.root.current = 'Visualizar'
#                    BoxLayout:
#                        size_hint_y:None
#                        height:'25dp'
                    Botaos:
                        size_hint_y:None
                        height:'40dp'
                        font_size:sp('30')
                        bold:True
                        text:'Total'
                        outline_width:3
                        outline_color:0,0,0
                        pos_hint:{'center_x':.1,'center_y':.3}
                        on_release: app.root.current = 'TelaTotal'
#                    BoxLayout:
#                        size_hint_y:None
#                        height:'20dp'
                    Botaos:
                        size_hint:None,None
                        width:'40dp'
                        height:'30dp'
        #                size_hint:.4,.5
                        text:'Sair'
                        outline_width:3
                        outline_color:0,0,0
                        pos_hint:{'center_x':.5}
                        pos_hint:{'center_x':.1,'center_y':.1}
                        on_release:root.confirmar()

#    Label:
#        pos_hint:{'center_x':.5,'center_y':.55}
#        color:.2,0,1,1
#        text:'com'
#        id:confere


<CorAdicionar@Label>:
    canvas.before:
        Color:
            rgba:.1,192,1,1
#            rgba:.5,.5,.5,1
        Rectangle:
            size:self.size
            pos:self.pos

<Adicionar>:

    FloatLayout:
        size_hint:None,None
        width:root.width
        height:root.height
        pos_hint:{'center_x':.5,'center_y':.5}
#        Image:
#            size_hint_y:1
#            source:'image/nuven.png'
#            allow_stretch:True
        CorAdicionar:

    BoxLayout:
        orientation:'vertical'
        ActionBar:
            size_hint_y:None
            height:'35dp'
            ActionView:
                ActionPrevious:
                    on_release: app.root.current = 'Menu'
                ActionSeparator:
                ActionButton:
                    on_release:app.root.current='setting'
                    size_hint_y:None
                    height:60
                    background_normal:'image/menu.png'
                    border:0,0,0,0
                    pos_hint:{'center_y':.5}

        BoxLayout:
            orientation:'vertical'
            BoxLayout:
                size_hint_y:None
                height:'60dp'
                canvas:
                    Color:
                        rgba:0,0,1,1
                    Rectangle:
                        size:self.width,self.height
                        pos:self.pos
                Label:
                    font_size:'25sp'
                    color:0,0,0,1
                    bold:True
                    underline:True
                    outline_width:2
                    outline_color:1,1,1,1
                    text:'Cerviços'
                    id:lb_title
            BoxLayout:

            BoxLayout:
                size_hint_y:None
                height:'40dp'
                Label:
                    size_hint_x:None
                    width:'100sp'
                    pos_hint:{'x':.15}
                    text:'Modelo'
                    color: 0.5,0.9,0.7,1
                    font_size:'20sp'
                    bold:True
                    outline_width:2
                    id:modelo
                TextInput:
                    size_hint:3,None
                    height:'30sp'
                    pos_hint:{'center_x':.5}
                    id:text_modelo

                Label:

            BoxLayout:
                size_hint_y:None
                height:'40dp'
                Label:
                    size_hint_x:None
                    width:'100sp'
                    pos_hint:{'x':.15}
                    text:'Local'
                    color: 0.5,0.9,0.7,1
                    font_size:sp('20')
                    bold:True
                    outline_width:2
                    id:local
                TextInput:
                    size_hint:3,None
                    height:'30sp'
                    pos_hint:{'center_x':.5}
                    id:text_local
                Label:

            BoxLayout:
                size_hint_y:None
                height:'40dp'
                Label:
                    size_hint_x:None
                    width:'100sp'
                    text:'Valor'
                    pos_hint:{'x':.15}
                    color: 0.5,0.9,0.7,1
                    font_size:'20sp'
                    bold:True
                    outline_width:2
                    id:valor
                Label:
                    size_hint_x:None
                    width:dp('20')
                    outline_width:1
                    text:'R$'
                    color:1,1,1,1
                    pos_hint:{'center_x':.2}
                TextInput:
                    size_hint:.3,None
                    height:'30sp'
                    pos_hint:{'center_x':.5}
                    id:text_valor
                Label:
            BoxLayout:
                Label:
                    color:0,0,0,1
                    text:'Adicione a cima o modelo do carro/moto, \nlocal e valor'
                    id:mensagen_add

    # Aqui adiciona os gastos
        BoxLayout:
            orientation:'vertical'
            spacing:'25sp'
            Label:
                text:'Valores gastos'
                id:valor_gastos
                font_size:'25sp'
                color: 1,0,0,1
                outline_width:3
                outline_color:0,0,0,1
                underline:3
                pos_hint:{'center_x':.5,'center_y':1}
            BoxLayout:
                size_hint_y:None
                height:'20dp'
                Label:
                    size_hint_x:None
                    width:'100sp'
                    pos_hint:{'center_x':.15,'center_y':.8}
                    text:'Eventos'
                    color: 1,0,0,1
                    font_size:sp('20')
                    outline_width:2
                    outline_color:0,0,0,1
                    bold:True
                TextInput:
                    size_hint:3,None #dp.2,.05
                    height:'30sp'
                    pos_hint:{'center_x':.5,'center_y':.8}
                    id:text_eventos
                Label:

            BoxLayout:
                size_hint_y:None
                height:'20dp'
                Label:
                    size_hint_x:None
                    width:'100sp'
                    text:'Gastos'
                    pos_hint:{'center_x':.5,'center_y':.8}
                    color: 1,0,0,1
                    font_size:sp('20')
                    outline_width:2
                    outline_color:0,0,0,1
                    bold:True
                Label:
                    size_hint_x:None
                    width:dp('20')
                    color: 1,0,0,1
                    text:'R$'
                    outline_width:2
                    outline_color:0,0,0,1
                    pos_hint:{'center_x':.2,'center_y':.8}
                TextInput:
                    size_hint:.3,None
                    height:'30dp'
                    pos_hint:{'center_x':.5,'center_y':.8}
                    id:text_gastos
                Label:
            BoxLayout:
                Label:
                    color:0,0,0,1
                    text:'Adicione os gastos com eventos ocorridos e valores'
                    id:mensagen_gastos

        BoxLayout:
            size_hint_y:None
            height:'60dp'
            FloatLayout:
                Button:
                    size_hint:None,None
                    width:'100dp'
                    height:'30dp'
                    pos_hint:{'center_x':.1 }
                    text:'visualizar'
                    bold:True
                    background_color: 0,.5,1,1
                    outline_width:1
                    on_release:app.root.current = 'Visualizar'

                Button:
                    size_hint:None,None
                    width:'100dp'
                    height:'30dp'
                    pos_hint:{'center_x':.5}
                    text:'Salvar'
                    bold:True
                    background_color: 0,.5,1,1
                    outline_width:1
                    on_release:root.save_data()

                Button:
                    size_hint:None,None
                    width:'100dp'
                    height:'30dp'
                    pos_hint:{'center_x':.9}
                    text:'Total'
                    bold:True
                    background_color: 0,.5,1,1
                    outline_width:1
                    on_release:app.root.current = 'TelaTotal'




<CorFund@Label>:
    # class da cor de fundo
    canvas.before:
        Color:
            rgba:.2,.4,.5,.5
        Rectangle:
            size:self.size
            pos:self.pos

<Visualizar>:
    CorFund:
    BoxLayout:
        orientation:'vertical'
        ActionBar:
            size_hint_y:None
            height:'30sp'
            ActionView:
                ActionPrevious:
                    on_release: app.root.current = 'Menu'
                ActionButton:

        BoxLayout:
            padding:10
            orientation:'vertical'
            size_hint_y:None
            height:sp('60')
            Label:
                #Label: Data, Modelo, Local, Valor
                size_hint_x:.03
                font_size:self.width
                color:.5,0,0,1
                bold: True
                pos_hint:{'x':.45,'center_y':1}
                id:super_modelo_text

        BoxLayout:
            id:box_valor
            ScrollView:
#               para ser adicionado os valores aqui
                BoxLayout:
                    orientation:'vertical'
                    size_hint_y: None
                    height: self.minimum_height
                    id: coteiner
        BoxLayout:
            size_hint_y:None
            height:'30sp'
            Label:
                bold:True
                font_size:30
                id:total_valor



<Box>:
    # A widget dos Valores para ser adicionado a Visualizar
    size_hint_y:None
    height: sp('50')
    BoxLayout:
        padding:10
        orientation:'vertical'
        size_hint_y:None
        height: sp('50')
        CorFund:
            size_hint_y:None
            height:'5sp'
        Label:
            size_hint_x:.03
            font_size:self.width
            text_size:None,None
            pos_hint:{'center_x':.5,'center_y':.5}
            id:texto
    Button:
        size_hint:None,None
        width:'30sp'
        height:'40sp'
        pos_hint:{'center_y':.5}
        background_color:1,0,0,1
        text:'X'
#        on_release:app.root.get_screen('Visualizar').deletar(root),app.root.get_screen('TelaTotal').deletar(root)
        on_release:app.root.get_screen('Visualizar').popap(root) # app.root.get_screen('TelaTotal').popap(root)


<Box_Total>:
    # A widget dos Valores para ser adicionado a TelaTotal
#    orientation:'vertical'
    size_hint_y:None
    height: sp('50')
    BoxLayout:
        padding:10
        orientation:'vertical'
        size_hint_y:None
        height: sp('50')
        CorFund:
            size_hint_y:None
            height:'5sp'
        Label:
            size_hint_x:.03
            font_size:'15sp'
            text_size:None,None
            pos_hint:{'center_x':.5,'center_y':0}
            id:texto
    Button:
        size_hint:None,None
        width:'30sp'
        height:'40sp'
        pos_hint:{'center_y':.5}
        background_color:1,0,0,1
        text:'X'
        on_release:app.root.get_screen('TelaTotal').popap(root)
        id:bt_box_total

<BiforeTotal>:
    size_hint_y:None
    height: sp(50)
    Label:
        size_hint_x:.03
        font_size:'10sp'
#        font_size:self.width
        text_size:None,None
        pos_hint:{'center_x':.5,'center_y':0}
        id:biforetotal


<TelaTotal>:
    BoxLayout:
        orientation:'vertical'
        spacing:'15dp'
        ActionBar
            size_hint_y:None
            height:'30sp'
            ActionView
                ActionPrevious
                    on_release:app.root.current = 'Menu'

        BoxLayout:
            orientation:'vertical'
            FloatLayout:
                Label:
                    size_hint:None,None
                    size:(.2,.2)
                    pos_hint:{'center_x':.2,'center_y':.99}
                    text:'Somas dos Valores:'
                Label:
                    pos_hint:{'x':.0,'center_y':.99}
                    font_size:'20sp'
                    id: Valor_soma
                Label:
                    pos_hint:{'center_x':.5,'center_y':.8}
                    font_size:'20sp'
                    underline:True
                    text:'--------> Divisao <--------'

                Label:
                    size_hint_x:None
                    x:.05
                    pos_hint:{'right':.43,'center_y':.6}
                    font_size:'25sp'
                    bold:True
#                    text:'60% :'
                    id:label_main
                Label:
                    font_size: '15sp'
                    pos_hint:{'x':.00,'center_y':.6}
                    id:valor_main

                Label:
                    size_hint_x:None
                    x:.05
                    pos_hint:{'right':.43,'center_y':.4}
                    font_size:'25sp'
                    bold:True
#                    text:'40% : '
                    id:label_sobra
                Label:
                    font_size:'15sp'
                    pos_hint:{'x':.00,'center_y':.4}
                    id:valor_sobra

                Label:
                    pos_hint:{'center_x':.5,'center_y':.1}
                    font_size: '25sp'
                    underline:True
                    outline_width:11
                    color:0,0,1,1
                    text:'--------> Gastos <---------'

            BoxLayout:
                orientation:'vertical'
                canvas:
                    Color:
                        rgba:0,0,.4,1
                    Rectangle:
                        size:self.width,self.height
                        pos:self.pos
                ScrollView
                    orientation:'vertical'
                    BoxLayout:
                        orientation:'vertical'
                        size_hint_y:None
                        height: self.minimum_height
                        id:gastos

                BoxLayout:
                    size_hint_y:None
                    height:'30sp'
                    canvas:
                        Color:
                            rgba:0,0,0,.5
                        Rectangle:
                            pos:self.x,self.y
                            size:self.width, self.height

                    Label:
                        font_size:'20sp'
                        id:total_gastos
